<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>How to Setup Wordpress for Ubuntu 20 LTS on a Digitalocean Droplet - Bartlomiej Mika</title><meta name=description content="Do you setup WordPress sites often and you want instructions you can repeat quickly? The purpose of this HOWTO is to provide a series of copy and paste commands you can use over and over to setup WordPress on an Ubuntu 20 LTS server using DigitalOcean for your future clients."><meta name=author content="Mika Software Corporation"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Bartlomiej Mika","url":"https:\/\/bartlomiejmika.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/bartlomiejmika.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/bartlomiejmika.com","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/bartlomiejmika.com\/post\/2021\/how-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet\/","name":"How to setup wordpress for ubuntu 20 l t s on a digitalocean droplet"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Bartlomiej Mika"},"headline":"How to Setup Wordpress for Ubuntu 20 LTS on a Digitalocean Droplet","description":"Do you setup WordPress sites often and you want instructions you can repeat quickly? The purpose of this HOWTO is to provide a series of copy and paste commands you can use over and over to setup WordPress on an Ubuntu 20 LTS server using DigitalOcean for your future clients.\n","inLanguage":"en","wordCount":1954,"datePublished":"2021-03-31T21:48:15","dateModified":"2021-03-31T21:48:15","image":"https:\/\/bartlomiejmika.com\/img\/bartlomiej_mika.jpeg","keywords":["WordPress, DevOps"],"mainEntityOfPage":"https:\/\/bartlomiejmika.com\/post\/2021\/how-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet\/","publisher":{"@type":"Organization","name":"https:\/\/bartlomiejmika.com","logo":{"@type":"ImageObject","url":"https:\/\/bartlomiejmika.com\/img\/bartlomiej_mika.jpeg","height":60,"width":60}}}</script><meta property="og:title" content="How to Setup Wordpress for Ubuntu 20 LTS on a Digitalocean Droplet"><meta property="og:description" content="Do you setup WordPress sites often and you want instructions you can repeat quickly? The purpose of this HOWTO is to provide a series of copy and paste commands you can use over and over to setup WordPress on an Ubuntu 20 LTS server using DigitalOcean for your future clients."><meta property="og:image" content="https://bartlomiejmika.com/img/bartlomiej_mika.jpeg"><meta property="og:url" content="https://bartlomiejmika.com/post/2021/how-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet/"><meta property="og:type" content="website"><meta property="og:site_name" content="Bartlomiej Mika"><meta name=twitter:title content="How to Setup Wordpress for Ubuntu 20 LTS on a Digitalocean Droplet"><meta name=twitter:description content="Do you setup WordPress sites often and you want instructions you can repeat quickly? The purpose of this HOWTO is to provide a series of copy and paste commands you can use over and over to setup â€¦"><meta name=twitter:image content="https://bartlomiejmika.com/img/bartlomiej_mika.jpeg"><meta name=twitter:card content="summary"><link href=https://bartlomiejmika.com/img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.80.0"><link rel=alternate href=https://bartlomiejmika.com/index.xml type=application/rss+xml title="Bartlomiej Mika"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://bartlomiejmika.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://bartlomiejmika.com/css/highlight.min.css><link rel=stylesheet href=https://bartlomiejmika.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-172742383-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://bartlomiejmika.com>Bartlomiej Mika</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Blog href=/>Blog</a></li><li><a title=Tags href=/tags>Tags</a></li><li><a title=About href=/about/>About</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Bartlomiej Mika" href=https://bartlomiejmika.com><img class=avatar-img src=https://bartlomiejmika.com/img/bartlomiej_mika.jpeg alt="Bartlomiej Mika"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>How to Setup Wordpress for Ubuntu 20 LTS on a Digitalocean Droplet</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on March 31, 2021
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;10&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1954&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Bartlomiej Mika</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p><img src=/img/2021/03-31/wordpress.jpeg alt></p><p>Do you setup WordPress sites often and you want instructions you can repeat quickly? The purpose of this HOWTO is to provide a series of copy and paste commands you can use over and over to setup WordPress on an Ubuntu 20 LTS server using DigitalOcean for your future clients.</p><h1 id=prerequisites>Prerequisites</h1><p>Before we begin, we&rsquo;ll need to establish a few items:</p><ol><li>You need a <strong><a href=https://m.do.co/c/2937038efac6>DigitalOcean</a></strong> account to follow along in this tutorial. If you don&rsquo;t have one, head on over there and sign up.</li><li>In this HOWTO I will be used <code>techops$</code>, <code>developer$</code> and <code>root#</code> in front of all my commands, this is to let you know the account you should be logged in as when executing the commands.</li><li>I assume you have generated a private public ssh keys and uploaded your public key to <a href=https://m.do.co/c/2937038efac6>DigitalOcean</a>.</li><li>I assume you know how to use <code>vim</code> in your linux console.</li><li>I assume you have purchased a domain name. For this HOWTO, I will be using <em>idiotbank.com</em>, so you&rsquo;ll need to replace all instances of this domain with your own. I will be using Namecheap as my domain name registrar.</li><li>This article was written in 2021 and if you are reading this at a different year, much will have changed!</li><li>I am assuming basic proficiency level with linux and if you don&rsquo;t understand a command you will look it up for more details.</li></ol><h1 id=instructions>Instructions</h1><h2 id=setup-droplet>Setup Droplet</h2><p>Log into your DigitalOcean dashboard and click the <strong>Create > Droplet</strong> button. The following options should be selected at <em>minimum</em>:</p><ul><li><strong>Choose an image:</strong> Ubuntu 20.04 (LTS) x64</li><li><strong>Choose a plan:</strong> <strong>(1)</strong> Regular Intel with SSD <strong>(2)</strong> $10/mo</li><li><strong>Choose a datacenter region:</strong> Toronto</li><li><strong>Select additional options:</strong> IPv6, Monitoring</li><li><strong>Authentication:</strong> SSH Keys - Your account selected</li><li><strong>Choose a hostname:</strong> idiotbank-wordpress</li><li>Finally click <strong>Create Droplet</strong> button when you are ready</li></ul><p>Once the droplet has been created, please make a note of the IP addresses the droplet uses:</p><ul><li><strong>IPv4:</strong> 159.203.12.17</li><li><strong>IPv6:</strong> 2604:a880:cad:d0::d92:3001</li></ul><p><strong>Notes:</strong></p><ul><li><ol><li>Please be aware that through this tutorial we will use these IP addresses, you must replace these values with your own. If you don&rsquo;t do this then the rest of this tutorial will be very confusing!*</li></ol></li><li><ol start=2><li>In the side sub-menu, please click <strong>Snapshots</strong> and be aware that throughout this tutorial you will periodically take snapshots of your droplet. Also this is where you will restore your droplet if you messed anything up while setting up your WordPress server.</li></ol></li></ul><h2 id=setup-dns>Setup DNS</h2><p>While being logged in your DigitalOcean, click the <strong>Networking</strong> menu item on the side menu. In the tabs, please click the <strong>Domains</strong> item. Once on this page, add your domain name in the textfield, select your project and click <strong>Add Domain</strong> button. Once clicked please make the following changes by going to the appropriate record (A, AAA, CNAME, ETC) and fill out the fields as follows:</p><ul><li><strong>A Record</strong><ul><li><strong>HOSTNAME:</strong> idiotbank.com</li><li><strong>WILL DIRECT TO:</strong> 159.203.12.17</li><li><strong>TTL (SECONDS):</strong> 80</li></ul></li><li><strong>AAAA Record</strong><ul><li><strong>HOSTNAME:</strong> idiotbank.com</li><li><strong>WILL DIRECT TO:</strong> 2604:a880:cad:d0::d92:3001</li><li><strong>TTL (SECONDS):</strong> 80</li></ul></li><li><strong>CNAME Record</strong><ul><li><strong>HOSTNAME:</strong> *</li><li><strong>IS AN ALIAS OF:</strong> @</li><li><strong>TTL (SECONDS):</strong> 80</li></ul></li></ul><p>Please log into your domain name registrar and point your purchased domain to DigitalOcean nameservers. The following <a href=https://www.digitalocean.com/community/tutorials/how-to-point-to-digitalocean-nameservers-from-common-domain-registrars>article published by DigitalOcean</a> provides various setup instructions you can follow. Please find your domain name registrar and follow their instructions. Once you have finished, please wait a few moments and then resume this tutorial.</p><h2 id=connect-to-your-droplet>Connect to your Droplet</h2><p>In your developers machine, please connect by running the command:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>developer$ ssh -l root 159.203.12.17</code></pre></div><p>Once you are connected then congratulations, you are ready to begin!</p><h2 id=setup-administrators-account>Setup administrators account</h2><p>We will create an administrative account called <code>techops</code> so we don&rsquo;t use our <code>root</code> account - this is done on all Linux machines for security purposes, for more information please read <a href=https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04>this article</a>. You can name your administrative account whatever you like, for example <code>bart</code>, however for this article we will refer to the <code>techops</code> user account as our administrators account.</p><p>Begin with the following:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>root# adduser techops
root# usermod -aG sudo techops</code></pre></div><p>Change into our new account</p><div class=highlight><pre class=chroma><code class=language-fallback data-lang=fallback>root# su - techops
</code></pre></div><h2 id=setup-basic-firewall>Setup Basic Firewall</h2><p>Configure a basic firewall which we will grow with in our system.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo ufw allow OpenSSH
techops$ sudo ufw <span class=nb>enable</span>
techops$ sudo ufw status</code></pre></div><h2 id=basic-ubuntu-update>Basic Ubuntu Update</h2><p>Update all the packages we have in our system. <em>Do not skip this step.</em></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo apt update</code></pre></div><h2 id=setup-basic-nginx>Setup Basic Nginx</h2><p>Install, and configure our web-server</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo apt install nginx
techops$ sudo ufw app list
techops$ sudo ufw allow <span class=s1>&#39;Nginx HTTP&#39;</span>
techops$ sudo ufw status</code></pre></div><p>Check to see if <code>nginx</code> has been started and running in the background. <em>You should see no error messages.</em><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo systemctl status nginx</code></pre></div></p><p>In your browser check <a href=159.203.12.17>http://159.203.12.17</a> and you should see an output.</p><p><img src=/img/2021/03-31/welcome-to-nginx-on-Ubuntu.jpg alt="Welcome to Nginx on Ubuntu"></p><p><em>If you see a page load up with no errors then please take a snapshot in your DigitalOcean droplet so you can return to this latest working configuration later in the tutorial.</em></p><h2 id=setup-website-home-directory-and-domain-name>Setup Website Home Directory and Domain Name</h2><p>Run the following:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo mkdir -p /var/www/idiotbank.com/html
techops$ sudo chown -R <span class=nv>$USER</span>:<span class=nv>$USER</span> /var/www/idiotbank.com/html
techops$ sudo chmod -R <span class=m>755</span> /var/www/idiotbank.com
techops$ vi /var/www/idiotbank.com/html/index.html</code></pre></div><p><em>Please note that you just ran the <code>vi</code> linux command. If you are not familiar with how to use <code>vi</code> then please watch <a href=https://youtu.be/pU2k776i2Zw>this quick youtube</a> explaining how to use it. Once you understand proceed forward with this tutorial - do not proceed forward if you do not understand!</em></p><p>Inside, add the following sample HTML and save the file:</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=c>&lt;!-- /var/www/idiotbank.com/html/index.html --&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Welcome to idiotbank.com!<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Success!  The idiotbank.com server block is working!<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span></code></pre></div><p>Next load up our virtual host configuration:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo vi /etc/nginx/sites-available/idiotbank.com</code></pre></div><p>Copy and paste the following code:</p><div class=highlight><pre class=chroma><code class=language-nginx data-lang=nginx><span class=k>server</span> <span class=p>{</span>
        <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
        <span class=kn>listen</span> <span class=s>[::]:80</span><span class=p>;</span>

        <span class=kn>root</span> <span class=s>/var/www/idiotbank.com/html</span><span class=p>;</span>
        <span class=kn>index</span> <span class=s>index.html</span> <span class=s>index.htm</span> <span class=s>index.nginx-debian.html</span><span class=p>;</span>

        <span class=kn>server_name</span> <span class=s>idiotbank.com</span> <span class=s>www.idiotbank.com</span><span class=p>;</span>

        <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
                <span class=kn>try_files</span> <span class=nv>$uri</span> <span class=nv>$uri/</span> <span class=p>=</span><span class=mi>404</span><span class=p>;</span>
        <span class=p>}</span>
<span class=p>}</span></code></pre></div><p>Attach our new virtual host to our web-server:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo ln -s /etc/nginx/sites-available/idiotbank.com /etc/nginx/sites-enabled/</code></pre></div><p>Open up our web-server&rsquo;s configuration:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo vi /etc/nginx/nginx.conf</code></pre></div><p>Search through the file until you see the following code and uncomment it out and save the file:</p><div class=highlight><pre class=chroma><code class=language-nginx data-lang=nginx><span class=k>...</span>
<span class=s>http</span> <span class=p>{</span>
    <span class=kn>...</span>
    <span class=s>server_names_hash_bucket_size</span> <span class=mi>64</span><span class=p>;</span>
    <span class=kn>...</span>
<span class=err>}</span>
<span class=s>...</span></code></pre></div><p>Verify our web-server works</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo nginx -t</code></pre></div><p><em>Note: There should be no errors here, if there are please investigate before proceeding any further!</em></p><p>Restart our web-server</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo systemctl restart nginx</code></pre></div><p>Now go to <a href=http://idiotbank.com>http://idiotbank.com</a> and you should see a page!</p><p><em>If you see a page load up with no errors then please take a snapshot in your DigitalOcean droplet so you can return to this latest working configuration later in the tutorial.</em></p><h2 id=setup-mariadb-database>Setup MariaDB Database</h2><p>The database is an essential piece we cannot forget. While we have the option of using <code>MySQL</code>, in this tutorial we will use <code>MariaDB</code> instead.</p><p>Begin by running the following:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo apt update
techops$ sudo apt install mariadb-server
techops$ sudo mysql_secure_installation</code></pre></div><p>Access our database</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo mariadb</code></pre></div><p>Creating an Administrative User that Employs Password Authentication.</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=k>GRANT</span> <span class=k>ALL</span> <span class=k>ON</span> <span class=o>*</span><span class=p>.</span><span class=o>*</span> <span class=k>TO</span> <span class=s1>&#39;admin&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span> <span class=n>IDENTIFIED</span> <span class=k>BY</span> <span class=s1>&#39;123password&#39;</span> <span class=k>WITH</span> <span class=k>GRANT</span> <span class=k>OPTION</span><span class=p>;</span>
<span class=n>FLUSH</span> <span class=k>PRIVILEGES</span><span class=p>;</span></code></pre></div><p><em>Note: This account is the administrative account which you can use to access <strong>all</strong> the databases in our system. Please be sure to use a more secure password!</em></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo systemctl status mariadb</code></pre></div><p><em>You should get no errors after running the above command.</em></p><p>Enable database on startup</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo systemctl <span class=nb>enable</span> mariadb</code></pre></div><p>Finally check</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ mysqladmin -u admin -p version</code></pre></div><h2 id=setup-php>Setup PHP</h2><p>Let&rsquo;s install our server-side programming language. Start by running the following to install our dependencies:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo apt install php-fpm php-mysql</code></pre></div><p>Open up our virtual host configuration:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo vi /etc/nginx/sites-available/idiotbank.com</code></pre></div><p>And replace completely with the following copy and paste:</p><div class=highlight><pre class=chroma><code class=language-nginx data-lang=nginx><span class=k>server</span> <span class=p>{</span>
    <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
    <span class=kn>server_name</span> <span class=s>idiotbank.com</span> <span class=s>www.idiotbank.com</span><span class=p>;</span>
    <span class=kn>root</span> <span class=s>/var/www/idiotbank.com</span><span class=p>;</span>

    <span class=kn>index</span> <span class=s>index.html</span> <span class=s>index.htm</span> <span class=s>index.php</span><span class=p>;</span>

    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
        <span class=kn>try_files</span> <span class=nv>$uri</span> <span class=nv>$uri/</span> <span class=p>=</span><span class=mi>404</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kn>location</span> <span class=p>~</span> <span class=sr>\.php$</span> <span class=p>{</span>
        <span class=kn>include</span> <span class=s>snippets/fastcgi-php.conf</span><span class=p>;</span>
        <span class=kn>fastcgi_pass</span> <span class=s>unix:/var/run/php/php7.4-fpm.sock</span><span class=p>;</span>
     <span class=p>}</span>

    <span class=kn>location</span> <span class=p>~</span> <span class=sr>/\.ht</span> <span class=p>{</span>
        <span class=kn>deny</span> <span class=s>all</span><span class=p>;</span>
    <span class=p>}</span>

<span class=p>}</span></code></pre></div><p>Unlink the following:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo unlink /etc/nginx/sites-enabled/default</code></pre></div><p>Open up our index file</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo vi /var/www/idiotbank.com/index.html</code></pre></div><p>Update the file with this copy and paste</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>idiotbank.com website<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Hello World!<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>

    <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>This is the landing page of <span class=p>&lt;</span><span class=nt>strong</span><span class=p>&gt;</span>idiotbank.com<span class=p>&lt;/</span><span class=nt>strong</span><span class=p>&gt;</span>.<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span></code></pre></div><p>Next create the following file</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo vi /var/www/idiotbank.com/info.php</code></pre></div><p>And copy and paste the following into it</p><div class=highlight><pre class=chroma><code class=language-php data-lang=php><span class=o>&lt;?</span><span class=nx>php</span>
<span class=nx>phpinfo</span><span class=p>();</span>
</code></pre></div><p>Finally in your browser visit the <a href=http://idiotbank.com/info.php>http://idiotbank.com/info.php</a> URL path and you should see a success message detailing the libraries used.</p><p><em>If you see a page load up with no errors then please take a snapshot in your DigitalOcean droplet so you can return to this latest working configuration later in the tutorial.</em></p><h2 id=setup-wordpress>Setup Wordpress</h2><p>The next instructions will be pertaining to setting up WordPress on our server. This section is divided into further sub-sections.</p><h3 id=setup-wordpress-database>Setup WordPress Database</h3><p>Enter our database</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ mysql -u admin -p</code></pre></div><p>And create our WordPress database</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=n>wordpress</span> <span class=k>DEFAULT</span> <span class=nb>CHARACTER</span> <span class=k>SET</span> <span class=n>utf8</span> <span class=k>COLLATE</span> <span class=n>utf8_unicode_ci</span><span class=p>;</span></code></pre></div><p>Create our WordPress user</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=k>CREATE</span> <span class=k>USER</span> <span class=s1>&#39;wordpressuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span> <span class=n>IDENTIFIED</span> <span class=k>BY</span> <span class=s1>&#39;123password&#39;</span><span class=p>;</span>

<span class=k>GRANT</span> <span class=k>ALL</span> <span class=k>ON</span> <span class=n>wordpress</span><span class=p>.</span><span class=o>*</span> <span class=k>TO</span> <span class=s1>&#39;wordpressuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=p>;</span>

<span class=n>EXIT</span><span class=p>;</span></code></pre></div><h3 id=setup-wordpress-php-dependencies>Setup WordPress PHP Dependencies</h3><p>Install our dependencies</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo apt install php-curl php-gd php-intl php-mbstring php-soap php-xml php-xmlrpc php-zip</code></pre></div><p>Restart our <code>php</code></p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo systemctl restart php7.4-fpm</code></pre></div><h3 id=setup-nginx-for-wordpress>Setup Nginx for WordPress</h3><p>Open virtual host configuration:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo vi /etc/nginx/sites-available/idiotbank.com</code></pre></div><p>Replace the contents of the file by copy and pasting the follwing:</p><div class=highlight><pre class=chroma><code class=language-nginx data-lang=nginx><span class=k>server</span> <span class=p>{</span>
    <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
    <span class=kn>server_name</span> <span class=s>idiotbank.com</span> <span class=s>www.idiotbank.com</span><span class=p>;</span>
    <span class=kn>root</span> <span class=s>/var/www/idiotbank.com/wordpress</span><span class=p>;</span>

    <span class=kn>index</span> <span class=s>index.html</span> <span class=s>index.htm</span> <span class=s>index.php</span><span class=p>;</span>

    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
       <span class=c1># try_files $uri $uri/ =404;
</span><span class=c1></span>       <span class=kn>try_files</span> <span class=nv>$uri</span> <span class=nv>$uri/</span> <span class=s>/index.php</span><span class=nv>$is_args$args</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kn>location</span> <span class=p>~</span> <span class=sr>\.php$</span> <span class=p>{</span>
        <span class=kn>include</span> <span class=s>snippets/fastcgi-php.conf</span><span class=p>;</span>
        <span class=kn>fastcgi_pass</span> <span class=s>unix:/var/run/php/php7.4-fpm.sock</span><span class=p>;</span>
     <span class=p>}</span>

    <span class=kn>location</span> <span class=p>~</span> <span class=sr>/\.ht</span> <span class=p>{</span>
        <span class=kn>deny</span> <span class=s>all</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=kn>location</span> <span class=p>=</span> <span class=s>/favicon.ico</span> <span class=p>{</span> <span class=kn>log_not_found</span> <span class=no>off</span><span class=p>;</span> <span class=kn>access_log</span> <span class=no>off</span><span class=p>;</span> <span class=p>}</span>
    <span class=kn>location</span> <span class=p>=</span> <span class=s>/robots.txt</span> <span class=p>{</span> <span class=kn>log_not_found</span> <span class=no>off</span><span class=p>;</span> <span class=kn>access_log</span> <span class=no>off</span><span class=p>;</span> <span class=kn>allow</span> <span class=s>all</span><span class=p>;</span> <span class=p>}</span>
    <span class=kn>location</span> <span class=p>~</span><span class=sr>*</span> <span class=s>\.(css|gif|ico|jpeg|jpg|js|png)</span>$ <span class=p>{</span>
        <span class=kn>expires</span> <span class=s>max</span><span class=p>;</span>
        <span class=kn>log_not_found</span> <span class=no>off</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span></code></pre></div><p>Next check to see if any configuration issues occur</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo nginx -t</code></pre></div><p>If no errors occur then please run the following to reload our web-server</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo systemctl reload nginx</code></pre></div><h3 id=actually-setup-wordpress>(Actually) Setup WordPress</h3><p>Run the following which will download the latest WordPress files, and setup our folder structure for the project:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ <span class=nb>cd</span> /tmp
techops$ curl -LO https://wordpress.org/latest.tar.gz
techops$ tar xzvf latest.tar.gz
techops$ cp /tmp/wordpress/wp-config-sample.php /tmp/wordpress/wp-config.php
techops$ sudo cp -a /tmp/wordpress/. /var/www/idiotbank.com/wordpress
techops$ sudo chown -R www-data:www-data /var/www/idiotbank.com/wordpress</code></pre></div><p>Run the following and copy the received content into your clipboard.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ curl -s https://api.wordpress.org/secret-key/1.1/salt/</code></pre></div><p>Open up your WordPress configuration file.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo vi /var/www/idiotbank.com/wordpress/wp-config.php</code></pre></div><p>Please make sure the following tasks are complete with your open configuration file:</p><ul><li>a. Change the database name</li><li>b. Change the database user</li><li>c. Change the database password</li><li>d. Paste in the clipboard for the dummy section</li><li>e. Append <code>define( 'FS_METHOD', 'direct' );</code> to the end of the file</li></ul><p>Save the file, now open up your browser and enter the <a href=http://idiotbank.com/wordpress>http://idiotbank.com/wordpress</a> URL path. If everything works fine, you should see a WordPress configuration screen - Please fill out your form.</p><p><img src=/img/2021/03-31/wp-setup.png alt="WP First Page"></p><p><em>If you see a page load up with no errors then please take a snapshot in your DigitalOcean droplet so you can return to this latest working configuration later in the tutorial.</em></p><h2 id=setup-ssl>Setup SSL</h2><p>Install our dependencies:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo apt install certbot python3-certbot-nginx</code></pre></div><p>Reload our web-server:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo systemctl reload nginx</code></pre></div><p>Update our firewall to make it advanced:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo ufw status
techops$ sudo ufw allow <span class=s1>&#39;Nginx Full&#39;</span>
techops$ sudo ufw delete allow <span class=s1>&#39;Nginx HTTP&#39;</span></code></pre></div><p>Install our SSL certificate and follow the instructions when prompted:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>techops$ sudo certbot --nginx -d idiotbank.com -d www.idiotbank.com</code></pre></div><p>Now open up your browser and enter the <a href=https://idiotbank.com>https://idiotbank.com</a> URL path. If everything works fine, you should see a WordPress page running without problems.</p><p><em>If you see a page load up with no errors then please take a snapshot in your DigitalOcean droplet so you can return to this latest working configuration later in the tutorial.</em></p><h1 id=special-thanks>Special Thanks:</h1><p>The following articles were invaluable and more-then-inspired this article.</p><ul><li><a href=https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04>https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04>https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-mariadb-on-ubuntu-20-04>https://www.digitalocean.com/community/tutorials/how-to-install-mariadb-on-ubuntu-20-04</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-ubuntu-20-04>https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-ubuntu-20-04</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-lemp-on-ubuntu-20-04>https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-with-lemp-on-ubuntu-20-04</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-20-04>https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-20-04</a></li></ul><p>Cover photo by <a href=https://unsplash.com/@launchpresso>Launchpresso</a> on <a href=https://unsplash.com>Unsplash</a>.</p><div class=blog-tags><a href=https://bartlomiejmika.com/tags/wordpress/>WordPress</a>&nbsp;
<a href=https://bartlomiejmika.com/tags/devops/>DevOps</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2fbartlomiejmika.com%2fpost%2f2021%2fhow-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet%2f&text=How%20to%20Setup%20Wordpress%20for%20Ubuntu%2020%20LTS%20on%20a%20Digitalocean%20Droplet&via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fbartlomiejmika.com%2fpost%2f2021%2fhow-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fbartlomiejmika.com%2fpost%2f2021%2fhow-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet%2f&title=How%20to%20Setup%20Wordpress%20for%20Ubuntu%2020%20LTS%20on%20a%20Digitalocean%20Droplet" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fbartlomiejmika.com%2fpost%2f2021%2fhow-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet%2f&title=How%20to%20Setup%20Wordpress%20for%20Ubuntu%2020%20LTS%20on%20a%20Digitalocean%20Droplet" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fbartlomiejmika.com%2fpost%2f2021%2fhow-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet%2f&title=How%20to%20Setup%20Wordpress%20for%20Ubuntu%2020%20LTS%20on%20a%20Digitalocean%20Droplet" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fbartlomiejmika.com%2fpost%2f2021%2fhow-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet%2f&description=How%20to%20Setup%20Wordpress%20for%20Ubuntu%2020%20LTS%20on%20a%20Digitalocean%20Droplet" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section></article><ul class="pager blog-pager"><li class=previous><a href=https://bartlomiejmika.com/post/2021/example-of-writing-a-simple-grpc-server-in-golang-from-scratch/ data-toggle=tooltip data-placement=top title="Example of Writing a Simple gRPC Server in Golang from Scratch">&larr; Previous Post</a></li><li class=next><a href=https://bartlomiejmika.com/post/2021/useful-resources-that-helped-me-learn-golang-throughout-the-years/ data-toggle=tooltip data-placement=top title="Useful Resources that Helped me Learn Golang over the Years">Next Post &rarr;</a></li></ul><div class=disqus-comments><button id=show-comments class="btn btn-default" type=button>Show <span class=disqus-comment-count data-disqus-url=https://bartlomiejmika.com/post/2021/how-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet>comments</span></button><div id=disqus_thread></div><script type=text/javascript>var disqus_config=function(){this.page.url='https:\/\/bartlomiejmika.com\/post\/2021\/how-to-setup-wordpress-for-ubuntu-20-lts-on-a-digitalocean-droplet';};</script></div></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:bart@mikasoftware.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/bartlomiej-mika title=Facebook><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/bartmika title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://reddit.com/u/eurasiasoft title=Reddit><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-reddit-alien fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/bartlomiej-mika-a9a5683b title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i><i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=https://mikasoftware.com>Mika Software Corporation</a>
&nbsp;&bull;&nbsp;&copy;
2021
&nbsp;&bull;&nbsp;
<a href=https://bartlomiejmika.com>Bartlomiej Mika</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.80.0</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://bartlomiejmika.com/js/main.js></script><script src=https://bartlomiejmika.com/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0");});</script><script>renderMathInElement(document.body);</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://bartlomiejmika.com/js/load-photoswipe.js></script><script type=text/javascript>$(function(){$('#show-comments').on('click',function(){var disqus_shortname='bartlomiej-mika';(function(){var disqus=document.createElement('script');disqus.type='text/javascript';disqus.async=true;disqus.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(disqus);})();$(this).hide();});});</script><script id=dsq-count-scr src=//bartlomiej-mika.disqus.com/count.js async></script></body></html>